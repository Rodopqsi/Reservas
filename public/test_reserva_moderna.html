<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crear Reserva - Ultra Moderno</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'glass': 'rgba(255, 255, 255, 0.25)',
                    }
                }
            }
        }
    </script>
    <style>
        .glass-morphism {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .hover-scale {
            transition: transform 0.2s ease-in-out;
        }
        
        .hover-scale:hover {
            transform: scale(1.02);
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .input-modern {
            transition: all 0.3s ease;
        }
        
        .input-modern:focus {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50">
    <div class="min-h-screen py-8">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Tarjeta principal con glassmorphism -->
            <div class="glass-morphism rounded-3xl shadow-2xl overflow-hidden">
                <!-- Gradiente de fondo -->
                <div class="absolute inset-0 bg-gradient-to-br from-purple-100/20 via-transparent to-blue-100/20"></div>
                
                <!-- Contenido -->
                <div class="relative p-8">
                    <!-- T√≠tulo y breadcrumb -->
                    <div class="mb-8">
                        <nav class="flex mb-4" aria-label="Breadcrumb">
                            <ol class="inline-flex items-center space-x-1 md:space-x-2">
                                <li class="inline-flex items-center">
                                    <a href="/calendario" class="text-gray-500 hover:text-purple-600 transition-colors duration-200">
                                        <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"></path>
                                        </svg>
                                        Calendario
                                    </a>
                                </li>
                                <li>
                                    <svg class="w-5 h-5 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                                    </svg>
                                </li>
                                <li>
                                    <span class="text-gray-800 font-medium">Nueva Reserva</span>
                                </li>
                            </ol>
                        </nav>
                        
                        <h1 class="text-4xl font-bold gradient-text mb-2">
                            ‚ú® Crear Nueva Reserva
                        </h1>
                        <p class="text-gray-600 text-lg">Complete el formulario para reservar un aula</p>
                    </div>

                    <!-- Formulario -->
                    <form method="POST" action="#" class="space-y-6" id="reservaForm">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <!-- Aula -->
                            <div class="space-y-2">
                                <label for="aula_id" class="block text-sm font-semibold text-gray-700 mb-2">
                                    üè´ Aula
                                </label>
                                <div class="relative">
                                    <select name="aula_id" id="aula_id" class="input-modern w-full px-4 py-3 rounded-xl border border-gray-200 bg-white/70 backdrop-blur-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 appearance-none" required>
                                        <option value="">Seleccione un aula</option>
                                        <option value="1">Aula 101 (A101) - Capacidad: 30</option>
                                        <option value="2">Aula 102 (A102) - Capacidad: 25</option>
                                        <option value="3">Aula 103 (A103) - Capacidad: 40</option>
                                        <option value="4">Laboratorio 1 (LAB1) - Capacidad: 20</option>
                                        <option value="5">Auditorio (AUD) - Capacidad: 100</option>
                                    </select>
                                    <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                                        <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                        </svg>
                                    </div>
                                </div>
                            </div>

                            <!-- Fecha -->
                            <div class="space-y-2">
                                <label for="fecha" class="block text-sm font-semibold text-gray-700 mb-2">
                                    üìÖ Fecha
                                </label>
                                <div class="relative">
                                    <input type="date" name="fecha" id="fecha" value="2025-07-06" min="2025-07-06" class="input-modern w-full px-4 py-3 rounded-xl border border-gray-200 bg-white/70 backdrop-blur-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200" required>
                                    <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                                        <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                        </svg>
                                    </div>
                                </div>
                            </div>

                            <!-- Hora inicio -->
                            <div class="space-y-2">
                                <label for="hora_inicio" class="block text-sm font-semibold text-gray-700 mb-2">
                                    üïê Hora de Inicio
                                </label>
                                <div class="relative">
                                    <select name="hora_inicio" id="hora_inicio" class="input-modern w-full px-4 py-3 rounded-xl border border-gray-200 bg-white/70 backdrop-blur-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 appearance-none" required>
                                        <option value="">Seleccionar hora</option>
                                        <option value="08:00">08:00 - 09:00</option>
                                        <option value="09:00">09:00 - 10:00</option>
                                        <option value="10:00">10:00 - 11:00</option>
                                        <option value="11:00">11:00 - 12:00</option>
                                        <option value="12:00">12:00 - 13:00</option>
                                        <option value="13:00">13:00 - 14:00</option>
                                        <option value="14:00">14:00 - 15:00</option>
                                        <option value="15:00">15:00 - 16:00</option>
                                        <option value="16:00">16:00 - 17:00</option>
                                        <option value="17:00">17:00 - 18:00</option>
                                        <option value="18:00">18:00 - 19:00</option>
                                    </select>
                                    <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                                        <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                        </svg>
                                    </div>
                                </div>
                            </div>

                            <!-- Hora fin -->
                            <div class="space-y-2">
                                <label for="hora_fin" class="block text-sm font-semibold text-gray-700 mb-2">
                                    üïê Hora de Fin
                                </label>
                                <div class="relative">
                                    <select name="hora_fin" id="hora_fin" class="input-modern w-full px-4 py-3 rounded-xl border border-gray-200 bg-white/70 backdrop-blur-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 appearance-none" required>
                                        <option value="">Seleccionar hora</option>
                                        <option value="09:00">09:00</option>
                                        <option value="10:00">10:00</option>
                                        <option value="11:00">11:00</option>
                                        <option value="12:00">12:00</option>
                                        <option value="13:00">13:00</option>
                                        <option value="14:00">14:00</option>
                                        <option value="15:00">15:00</option>
                                        <option value="16:00">16:00</option>
                                        <option value="17:00">17:00</option>
                                        <option value="18:00">18:00</option>
                                        <option value="19:00">19:00</option>
                                    </select>
                                    <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                                        <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                        </svg>
                                    </div>
                                </div>
                            </div>

                            <!-- Motivo -->
                            <div class="lg:col-span-2 space-y-2">
                                <label for="motivo" class="block text-sm font-semibold text-gray-700 mb-2">
                                    üìù Motivo de la Reserva
                                </label>
                                <input type="text" name="motivo" id="motivo" value="" placeholder="Ej: Clase de Matem√°ticas, Reuni√≥n de departamento, etc." class="input-modern w-full px-4 py-3 rounded-xl border border-gray-200 bg-white/70 backdrop-blur-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200" required>
                            </div>

                            <!-- Observaciones -->
                            <div class="lg:col-span-2 space-y-2">
                                <label for="observaciones" class="block text-sm font-semibold text-gray-700 mb-2">
                                    üí≠ Observaciones (Opcional)
                                </label>
                                <textarea name="observaciones" id="observaciones" rows="3" placeholder="Informaci√≥n adicional sobre la reserva..." class="input-modern w-full px-4 py-3 rounded-xl border border-gray-200 bg-white/70 backdrop-blur-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 resize-none"></textarea>
                            </div>
                        </div>

                        <!-- Botones -->
                        <div class="flex flex-col sm:flex-row items-center justify-end gap-4 pt-6 border-t border-gray-200/50">
                            <a href="/calendario" class="w-full sm:w-auto px-6 py-3 text-center bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-xl transition-all duration-200 hover-scale">
                                <svg class="w-4 h-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                                Cancelar
                            </a>
                            <button type="submit" class="w-full sm:w-auto px-8 py-3 gradient-bg text-white font-medium rounded-xl transition-all duration-200 hover-scale shadow-lg hover:shadow-xl">
                                <svg class="w-4 h-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                                Crear Reserva
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Actualizar hora de fin autom√°ticamente cuando cambie la hora de inicio
        document.getElementById('hora_inicio').addEventListener('change', function() {
            const horaInicio = this.value;
            const horaFin = document.getElementById('hora_fin');
            
            if (horaInicio) {
                const hora = parseInt(horaInicio.split(':')[0]);
                const horaFinFormateada = String(hora + 1).padStart(2, '0') + ':00';
                
                for (let option of horaFin.options) {
                    if (option.value === horaFinFormateada) {
                        option.selected = true;
                        break;
                    }
                }
            }
        });

        // Obtener par√°metros de la URL
        const urlParams = new URLSearchParams(window.location.search);
        const aulaId = urlParams.get('aula_id');
        const fecha = urlParams.get('fecha');
        const horaInicio = urlParams.get('hora_inicio');
        const horaFin = urlParams.get('hora_fin');

        // Prellenar formulario con datos de la URL
        if (aulaId) {
            document.getElementById('aula_id').value = aulaId;
        }
        if (fecha) {
            document.getElementById('fecha').value = fecha;
        }
        if (horaInicio) {
            document.getElementById('hora_inicio').value = horaInicio;
        }
        if (horaFin) {
            document.getElementById('hora_fin').value = horaFin;
        }

        // Mostrar informaci√≥n de selecci√≥n m√∫ltiple
        if (horaInicio && horaFin) {
            const horaInicioNum = parseInt(horaInicio.split(':')[0]);
            const horaFinNum = parseInt(horaFin.split(':')[0]);
            const duracion = horaFinNum - horaInicioNum;
            
            if (duracion > 1) {
                const form = document.getElementById('reservaForm');
                const infoDiv = document.createElement('div');
                infoDiv.className = 'bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-xl p-6 mb-6 shadow-lg';
                infoDiv.innerHTML = `
                    <div class="flex items-center">
                        <div class="bg-gradient-to-r from-blue-500 to-purple-500 rounded-full p-2 mr-4">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800">Reserva de m√∫ltiples horas</h3>
                            <p class="text-gray-600 mt-1">
                                Has seleccionado <strong>${duracion} horas consecutivas</strong> (${horaInicio} - ${horaFin})
                            </p>
                        </div>
                    </div>
                `;
                form.parentNode.insertBefore(infoDiv, form);
            }
        }

        // Manejar env√≠o del formulario
        document.getElementById('reservaForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Simular env√≠o exitoso
            const submitButton = this.querySelector('button[type="submit"]');
            const originalText = submitButton.innerHTML;
            
            submitButton.innerHTML = `
                <svg class="w-4 h-4 inline mr-2 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                </svg>
                Creando...
            `;
            submitButton.disabled = true;
            
            setTimeout(() => {
                alert('¬°Reserva creada exitosamente!\n\nEsta es una versi√≥n de prueba. En producci√≥n, los datos se guardar√≠an en la base de datos.');
                submitButton.innerHTML = originalText;
                submitButton.disabled = false;
            }, 2000);
        });
    </script>
</body>
</html>
